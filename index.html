<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8" />
    <title>å¤šèªå–®å­—å¡ç³»çµ±</title>
    <!-- Bootstrap 5 CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>

<body class="bg-light py-4">
    <div class="container">
        <!-- æ¨™é¡Œåˆ— -->
        <header class="mb-4">
            <h1 class="h3 mb-1">å¤šèªå–®å­—å¡ï¼ˆè‹± / ä¸­ / æ³°ï¼‰</h1>
            <p class="text-muted mb-0">
                ç´”å‰ç«¯ç‰ˆï¼šBootstrap 5 + JavaScript + SpeechSynthesis èªéŸ³ç™¼éŸ³
            </p>
        </header>

        <!-- å–®å­—æ¸…å–®ï¼ˆæ”¶æŠ˜å€å¡Šï¼‰ -->
        <div class="accordion mb-4" id="wordListAccordion">
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingList">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseList" aria-expanded="false" aria-controls="collapseList">
                        å–®å­—æ¸…å–®
                        <span class="badge bg-primary ms-2" id="cardCount">0</span>
                    </button>
                </h2>
                <div id="collapseList" class="accordion-collapse collapse" aria-labelledby="headingList"
                    data-bs-parent="#wordListAccordion">
                    <div class="accordion-body p-0">
                        <ul class="list-group list-group-flush" id="wordList"></ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- å–®å­—å¡ä¸»å€å¡Š -->
        <div class="card shadow-sm" id="cardContainer" style="display: none;">
            <!-- æ¨™é¡Œèˆ‡åˆ‡æ›æŒ‰éˆ• -->
            <div class="card-header d-flex justify-content-between align-items-center">
                <div>
                    <span class="badge bg-secondary me-2" id="cardIndexBadge">#1 / 1</span>
                    <strong id="wordEnTitle">word</strong>
                </div>
                <div class="btn-group" role="group" aria-label="Card navigation">
                    <button type="button" class="btn btn-outline-secondary btn-sm" id="prevBtn">
                        â—€ ä¸Šä¸€å¼µ
                    </button>
                    <button type="button" class="btn btn-outline-secondary btn-sm" id="nextBtn">
                        ä¸‹ä¸€å¼µ â–¶
                    </button>
                </div>
            </div>

            <!-- å…§å®¹å€ï¼šè‹± / ä¸­ / æ³° -->
            <div class="card-body">
                <div class="row g-3">
                    <!-- è‹±æ–‡å€å¡Š -->
                    <div class="col-md-4">
                        <div class="border rounded-3 p-3 h-100 bg-white">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">English</h5>
                                <div class="btn-group btn-group-sm" role="group">
                                    <button type="button" class="btn btn-outline-primary" id="speakEnWordBtn">
                                        ğŸ”Š å–®å­—
                                    </button>
                                    <button type="button" class="btn btn-outline-primary" id="speakEnSentenceBtn">
                                        ğŸ”Š å¥å­
                                    </button>
                                </div>
                            </div>
                            <hr />
                            <p class="mb-1">
                                <span class="fw-bold">Wordï¼š</span>
                                <span id="wordEn"></span>
                            </p>
                            <p class="mb-0">
                                <span class="fw-bold">Sentenceï¼š</span>
                                <span id="sentenceEn"></span>
                            </p>
                        </div>
                    </div>

                    <!-- ä¸­æ–‡å€å¡Š -->
                    <div class="col-md-4">
                        <div class="border rounded-3 p-3 h-100 bg-white">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">ä¸­æ–‡</h5>
                                <div class="btn-group btn-group-sm" role="group">
                                    <button type="button" class="btn btn-outline-success" id="speakZhWordBtn">
                                        ğŸ”Š å–®å­—
                                    </button>
                                    <button type="button" class="btn btn-outline-success" id="speakZhSentenceBtn">
                                        ğŸ”Š å¥å­
                                    </button>
                                </div>
                            </div>
                            <hr />
                            <p class="mb-1">
                                <span class="fw-bold">å–®å­—ï¼š</span>
                                <span id="wordZh"></span>
                            </p>
                            <p class="text-muted mb-2">
                                <span class="fw-bold">æ‹¼éŸ³ï¼š</span>
                                <span id="wordZhPinyin"></span>
                            </p>
                            <p class="mb-1">
                                <span class="fw-bold">ä¾‹å¥ï¼š</span>
                                <span id="sentenceZh"></span>
                            </p>
                            <p class="text-muted mb-0">
                                <span class="fw-bold">ä¾‹å¥æ‹¼éŸ³ï¼š</span>
                                <span id="sentenceZhPinyin"></span>
                            </p>
                        </div>
                    </div>

                    <!-- æ³°æ–‡å€å¡Š -->
                    <div class="col-md-4">
                        <div class="border rounded-3 p-3 h-100 bg-white">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">à¸ à¸²à¸©à¸²à¹„à¸—à¸¢</h5>
                                <div class="btn-group btn-group-sm" role="group">
                                    <button type="button" class="btn btn-outline-warning" id="speakThWordBtn">
                                        ğŸ”Š à¸„à¸³à¸¨à¸±à¸à¸—à¹Œ
                                    </button>
                                    <button type="button" class="btn btn-outline-warning" id="speakThSentenceBtn">
                                        ğŸ”Š à¸›à¸£à¸°à¹‚à¸¢à¸„
                                    </button>
                                </div>
                            </div>
                            <hr />
                            <p class="mb-1">
                                <span class="fw-bold">à¸„à¸³à¸¨à¸±à¸à¸—à¹Œï¼š</span>
                                <span id="wordTh"></span>
                            </p>
                            <p class="mb-0">
                                <span class="fw-bold">à¸›à¸£à¸°à¹‚à¸¢à¸„ï¼š</span>
                                <span id="sentenceTh"></span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ç„¡è³‡æ–™æç¤º -->
        <div class="alert alert-warning mt-3" id="noDataAlert" style="display: none;">
            ç›®å‰æ²’æœ‰ä»»ä½•å–®å­—å¡è³‡æ–™ï¼Œè«‹ç¢ºèª JSON å…§å®¹ã€‚
        </div>
    </div>

    <!-- Bootstrap 5 JS (å« Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- ä¸»ç¨‹å¼ï¼šå–®å­—å¡é‚è¼¯ -->
    <script>
        // === 1. å–®å­— JSON è³‡æ–™ ===
        const cards = [
            {
                word: 'hug',
                zh: 'æ“æŠ±',
                zh_pinyin: 'yong bao',
                th: 'à¸à¸­à¸”',
                examples: {
                    en: {
                        sentence: 'She gave me a warm hug before leaving.',
                        word: 'hug',
                    },
                    zh: {
                        sentence: 'å¥¹é›¢é–‹ä¹‹å‰çµ¦äº†æˆ‘ä¸€å€‹æº«æš–çš„æ“æŠ±ã€‚',
                        sentence_pinyin:
                            'ta li kai zhi qian gei le wo yi ge wen nuan de yong bao',
                        word: 'æ“æŠ±',
                        word_pinyin: 'yong bao',
                    },
                    th: {
                        sentence: 'à¹€à¸˜à¸­à¸à¸­à¸”à¸‰à¸±à¸™à¸­à¸¢à¹ˆà¸²à¸‡à¸­à¸šà¸­à¸¸à¹ˆà¸™à¸à¹ˆà¸­à¸™à¸ˆà¸°à¹„à¸›',
                        word: 'à¸à¸­à¸”',
                    },
                },
            },
            {
                word: 'scent',
                zh: 'é¦™å‘³',
                zh_pinyin: 'xiang wei',
                th: 'à¸à¸¥à¸´à¹ˆà¸™à¸«à¸­à¸¡',
                examples: {
                    en: {
                        sentence: 'The scent of fresh flowers filled the room.',
                        word: 'scent',
                    },
                    zh: {
                        sentence: 'æ–°é®®èŠ±æœµçš„é¦™å‘³å……æ»¿äº†æ•´å€‹æˆ¿é–“ã€‚',
                        sentence_pinyin:
                            'xin xian hua duo de xiang wei chong man le zheng ge fang jian',
                        word: 'é¦™å‘³',
                        word_pinyin: 'xiang wei',
                    },
                    th: {
                        sentence: 'à¸à¸¥à¸´à¹ˆà¸™à¸«à¸­à¸¡à¸‚à¸­à¸‡à¸”à¸­à¸à¹„à¸¡à¹‰à¸ªà¸”à¸­à¸šà¸­à¸§à¸¥à¹„à¸›à¸—à¸±à¹ˆà¸§à¸«à¹‰à¸­à¸‡',
                        word: 'à¸à¸¥à¸´à¹ˆà¸™à¸«à¸­à¸¡',
                    },
                },
            },
            {
                word: 'pervy',
                zh: 'è®Šæ…‹çš„',
                zh_pinyin: 'bian tai de',
                th: 'à¸¥à¸²à¸¡à¸',
                examples: {
                    en: {
                        sentence: 'He made a pervy joke that made everyone uncomfortable.',
                        word: 'pervy',
                    },
                    zh: {
                        sentence:
                            'ä»–é–‹äº†ä¸€å€‹è®Šæ…‹çš„ç©ç¬‘ï¼Œè®“å¤§å®¶éƒ½è¦ºå¾—ä¸èˆ’æœã€‚',
                        sentence_pinyin:
                            'ta kai le yi ge bian tai de wan xiao rang da jia dou jue de bu shu fu',
                        word: 'è®Šæ…‹çš„',
                        word_pinyin: 'bian tai de',
                    },
                    th: {
                        sentence: 'à¹€à¸‚à¸²à¸à¸¹à¸”à¸¡à¸¸à¸à¸¥à¸²à¸¡à¸à¸—à¸µà¹ˆà¸—à¸³à¹ƒà¸«à¹‰à¸—à¸¸à¸à¸„à¸™à¸£à¸¹à¹‰à¸ªà¸¶à¸à¸­à¸¶à¸”à¸­à¸±à¸”',
                        word: 'à¸¥à¸²à¸¡à¸',
                    },
                },
            },
        ];

        // === 2. DOM å…ƒç´ å–å¾— ===
        const cardContainer = document.getElementById('cardContainer');
        const noDataAlert = document.getElementById('noDataAlert');
        const cardCount = document.getElementById('cardCount');
        const wordList = document.getElementById('wordList');

        const cardIndexBadge = document.getElementById('cardIndexBadge');
        const wordEnTitle = document.getElementById('wordEnTitle');

        const wordEnEl = document.getElementById('wordEn');
        const sentenceEnEl = document.getElementById('sentenceEn');

        const wordZhEl = document.getElementById('wordZh');
        const wordZhPinyinEl = document.getElementById('wordZhPinyin');
        const sentenceZhEl = document.getElementById('sentenceZh');
        const sentenceZhPinyinEl = document.getElementById('sentenceZhPinyin');

        const wordThEl = document.getElementById('wordTh');
        const sentenceThEl = document.getElementById('sentenceTh');

        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');

        // å…­å€‹ç™¼éŸ³æŒ‰éˆ•
        const speakEnWordBtn = document.getElementById('speakEnWordBtn');
        const speakEnSentenceBtn = document.getElementById('speakEnSentenceBtn');
        const speakZhWordBtn = document.getElementById('speakZhWordBtn');
        const speakZhSentenceBtn = document.getElementById('speakZhSentenceBtn');
        const speakThWordBtn = document.getElementById('speakThWordBtn');
        const speakThSentenceBtn = document.getElementById('speakThSentenceBtn');

        // === 3. ç‹€æ…‹ï¼šç›®å‰é¡¯ç¤ºå“ªä¸€å¼µå¡ç‰‡ ===
        let currentIndex = 0;

        // === 4. æ¸²æŸ“å–®å­—å¡å…§å®¹ ===
        function renderCard() {
            if (!cards.length) return;

            if (currentIndex < 0) currentIndex = 0;
            if (currentIndex >= cards.length) currentIndex = cards.length - 1;

            const card = cards[currentIndex];

            cardIndexBadge.textContent = `#${currentIndex + 1} / ${cards.length}`;
            wordEnTitle.textContent = card.word;

            // è‹±æ–‡å€
            wordEnEl.textContent = card.word || '';
            sentenceEnEl.textContent = card.examples?.en?.sentence || '';

            // ä¸­æ–‡å€
            wordZhEl.textContent = card.zh || '';
            wordZhPinyinEl.textContent = card.zh_pinyin || '';
            sentenceZhEl.textContent = card.examples?.zh?.sentence || '';
            sentenceZhPinyinEl.textContent =
                card.examples?.zh?.sentence_pinyin || '';

            // æ³°æ–‡å€
            wordThEl.textContent = card.th || '';
            sentenceThEl.textContent = card.examples?.th?.sentence || '';

            // æ›´æ–°æ¸…å–®æ¨£å¼
            updateWordListActive();
        }

        // === 5. å»ºç«‹æ¸…å–®é …ç›®ï¼ˆæ”¶æŠ˜æ¸…å–®ï¼‰ ===
        function buildWordList() {
            wordList.innerHTML = '';
            cards.forEach((card, index) => {
                const btn = document.createElement('button');
                btn.type = 'button';
                btn.className =
                    'list-group-item list-group-item-action d-flex justify-content-between align-items-center';
                btn.dataset.index = index;

                const leftSpan = document.createElement('span');
                leftSpan.textContent = card.word;

                const rightSmall = document.createElement('small');
                rightSmall.className = 'text-muted';
                rightSmall.textContent = `${card.zh} / ${card.th}`;

                btn.appendChild(leftSpan);
                btn.appendChild(rightSmall);

                btn.addEventListener('click', () => {
                    currentIndex = index;
                    renderCard();
                });

                wordList.appendChild(btn);
            });
            cardCount.textContent = cards.length.toString();
        }

        // ä½¿ç”¨ Bootstrap çš„æ·ºè‰²æ¨£å¼ä¾†æ¨™è¨˜ç•¶å‰é …ç›®ï¼ˆé¿å…æ·±è—è‰² activeï¼‰
        function updateWordListActive() {
            const items = wordList.querySelectorAll('button.list-group-item');
            items.forEach((el, idx) => {
                el.classList.remove('list-group-item-light', 'fw-bold');
                if (idx === currentIndex) {
                    el.classList.add('list-group-item-light', 'fw-bold');
                }
            });
        }

        // === 6. èªéŸ³ç™¼éŸ³åŠŸèƒ½ï¼ˆä½¿ç”¨ SpeechSynthesisï¼‰ ===
        let voices = [];

        function loadVoices() {
            if (!('speechSynthesis' in window)) return;
            voices = window.speechSynthesis.getVoices();
        }

        if ('speechSynthesis' in window) {
            loadVoices();
            window.speechSynthesis.onvoiceschanged = loadVoices;
        }

        function getVoiceForLang(lang) {
            if (!voices || !voices.length) return null;
            const lowerLang = lang.toLowerCase();
            // å„ªå…ˆå®Œå…¨åŒ¹é…ï¼Œå…¶æ¬¡å‰ç¶´åŒ¹é…
            let voice =
                voices.find((v) => v.lang.toLowerCase() === lowerLang) ||
                voices.find((v) => v.lang.toLowerCase().startsWith(lowerLang));
            return voice || null;
        }

        function speak(text, lang) {
            if (!('speechSynthesis' in window)) {
                alert('æ­¤ç€è¦½å™¨ä¸æ”¯æ´èªéŸ³åˆæˆåŠŸèƒ½ã€‚');
                return;
            }
            if (!text) {
                alert('ç›®å‰æ²’æœ‰å¯æœ—è®€çš„å…§å®¹ã€‚');
                return;
            }

            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = lang;

            // è©¦è‘—é¸æ“‡é©åˆèªç³»çš„ voice
            const voice = getVoiceForLang(lang);
            if (voice) {
                utterance.voice = voice;
            }

            window.speechSynthesis.cancel();
            window.speechSynthesis.speak(utterance);
        }

        // === 7. äº‹ä»¶ç¶å®š ===
        prevBtn.addEventListener('click', () => {
            if (!cards.length) return;
            currentIndex = (currentIndex - 1 + cards.length) % cards.length;
            renderCard();
        });

        nextBtn.addEventListener('click', () => {
            if (!cards.length) return;
            currentIndex = (currentIndex + 1) % cards.length;
            renderCard();
        });

        // è‹±æ–‡ï¼šå–®å­— / å¥å­
        speakEnWordBtn.addEventListener('click', () => {
            const card = cards[currentIndex];
            speak(card.word, 'en-US');
        });

        speakEnSentenceBtn.addEventListener('click', () => {
            const card = cards[currentIndex];
            const textToSpeak = card.examples?.en?.sentence || card.word;
            speak(textToSpeak, 'en-US');
        });

        // ä¸­æ–‡ï¼šå–®å­— / å¥å­
        speakZhWordBtn.addEventListener('click', () => {
            const card = cards[currentIndex];
            const textToSpeak =
                card.examples?.zh?.word || card.zh || '';
            speak(textToSpeak, 'zh-CN');
        });

        speakZhSentenceBtn.addEventListener('click', () => {
            const card = cards[currentIndex];
            const textToSpeak =
                card.examples?.zh?.sentence || card.zh || '';
            speak(textToSpeak, 'zh-CN');
        });

        // æ³°æ–‡ï¼šå–®å­— / å¥å­
        speakThWordBtn.addEventListener('click', () => {
            const card = cards[currentIndex];
            const textToSpeak =
                card.examples?.th?.word || card.th || '';
            speak(textToSpeak, 'th-TH');
        });

        speakThSentenceBtn.addEventListener('click', () => {
            const card = cards[currentIndex];
            const textToSpeak =
                card.examples?.th?.sentence || card.th || '';
            speak(textToSpeak, 'th-TH');
        });

        // === 8. åˆå§‹åŒ– ===
        function init() {
            if (!cards.length) {
                cardContainer.style.display = 'none';
                noDataAlert.style.display = 'block';
                return;
            }
            buildWordList();
            cardContainer.style.display = 'block';
            noDataAlert.style.display = 'none';
            renderCard();
        }

        init();
    </script>
</body>

</html>